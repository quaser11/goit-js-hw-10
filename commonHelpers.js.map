{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import '../css/timer.css';\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst daysToCountdown = document.querySelector('[data-days]');\nconst hoursToCountdown = document.querySelector('[data-hours]');\nconst minutesToCountdown = document.querySelector('[data-minutes]');\nconst secondsToCountdown = document.querySelector('[data-seconds]');\nconst startBtn = document.querySelector('[data-start]');\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    let time = selectedDates[0].getTime() - new Date().getTime()\n    let timeToCountdown = convertMs()\n\n    if (time <= 0) {\n      iziToast.show({\n        color:'red',\n        title:'Wrong time'\n      })\n      selectedDates[0] = new Date()\n      return\n    }\n    timeToCountdown = convertMs(time)\n    renderData(timeToCountdown)\n    startBtn.disabled = false;\n    iziToast.show({\n      color:'green',\n      title:'Success!'\n    })\n    startBtn.addEventListener('click', onStartBtnClick)\n\n    function onStartBtnClick(e) {\n      startBtn.disabled = true;\n      iziToast.show({\n        color:'green',\n        title:'Countdown started'\n      })\n      let interval = setInterval(() => {\n        if (time <= 1000) {\n          iziToast.show({\n            color:'yellow',\n            title:'Countdown end'\n          })\n          clearInterval(interval);\n          return\n        }\n        time -= 1000;\n        timeToCountdown = convertMs(time);\n        renderData(timeToCountdown)\n      }, 1000)\n    }\n  }\n})\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  let days = Math.floor(ms / day);\n  // Remaining hours\n  let hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  let minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  let seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  days = addLeadingZero(days);\n  hours = addLeadingZero(hours);\n  minutes = addLeadingZero(minutes);\n  seconds = addLeadingZero(seconds);\n\n  return {days, hours, minutes, seconds};\n}\n\nfunction addLeadingZero(value){\n  if(value < 10){\n    return String(value).padStart(2, '0')\n  }\n\n  return String(value)\n}\nfunction renderData({days, hours, minutes, seconds}) {\n  daysToCountdown.innerHTML = days;\n  hoursToCountdown.innerHTML = hours;\n  minutesToCountdown.innerHTML = minutes;\n  secondsToCountdown.innerHTML = seconds;\n}\n"],"names":["daysToCountdown","hoursToCountdown","minutesToCountdown","secondsToCountdown","startBtn","flatpickr","selectedDates","time","timeToCountdown","convertMs","iziToast","renderData","onStartBtnClick","e","interval","ms","days","hours","minutes","seconds","addLeadingZero","value"],"mappings":"sGAMA,MAAMA,EAAkB,SAAS,cAAc,aAAa,EACtDC,EAAmB,SAAS,cAAc,cAAc,EACxDC,EAAqB,SAAS,cAAc,gBAAgB,EAC5DC,EAAqB,SAAS,cAAc,gBAAgB,EAC5DC,EAAW,SAAS,cAAc,cAAc,EAEtDC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,IAAIC,EAAOD,EAAc,CAAC,EAAE,QAAO,EAAK,IAAI,KAAM,EAAC,QAAS,EACxDE,EAAkBC,EAAW,EAEjC,GAAIF,GAAQ,EAAG,CACbG,EAAS,KAAK,CACZ,MAAM,MACN,MAAM,YACd,CAAO,EACDJ,EAAc,CAAC,EAAI,IAAI,KACvB,MACD,CACDE,EAAkBC,EAAUF,CAAI,EAChCI,EAAWH,CAAe,EAC1BJ,EAAS,SAAW,GACpBM,EAAS,KAAK,CACZ,MAAM,QACN,MAAM,UACZ,CAAK,EACDN,EAAS,iBAAiB,QAASQ,CAAe,EAElD,SAASA,EAAgBC,EAAG,CAC1BT,EAAS,SAAW,GACpBM,EAAS,KAAK,CACZ,MAAM,QACN,MAAM,mBACd,CAAO,EACD,IAAII,EAAW,YAAY,IAAM,CAC/B,GAAIP,GAAQ,IAAM,CAChBG,EAAS,KAAK,CACZ,MAAM,SACN,MAAM,eAClB,CAAW,EACD,cAAcI,CAAQ,EACtB,MACD,CACDP,GAAQ,IACRC,EAAkBC,EAAUF,CAAI,EAChCI,EAAWH,CAAe,CAC3B,EAAE,GAAI,CACR,CACF,CACH,CAAC,EAED,SAASC,EAAUM,EAAI,CAQrB,IAAIC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAEhE,OAAAC,EAAOI,EAAeJ,CAAI,EAC1BC,EAAQG,EAAeH,CAAK,EAC5BC,EAAUE,EAAeF,CAAO,EAChCC,EAAUC,EAAeD,CAAO,EAEzB,CAAC,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEA,SAASC,EAAeC,EAAM,CAC5B,OAAGA,EAAQ,GACF,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAG/B,OAAOA,CAAK,CACrB,CACA,SAASV,EAAW,CAAC,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACnDnB,EAAgB,UAAYgB,EAC5Bf,EAAiB,UAAYgB,EAC7Bf,EAAmB,UAAYgB,EAC/Bf,EAAmB,UAAYgB,CACjC"}